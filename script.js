// Language translations
const translations = {
    en: {
        // Navigation
        'Services': 'Services',
        'US Market Entry': 'US Market Entry',
        'AI Solutions': 'AI Solutions',
        'About': 'About',
        'Contact': 'Contact',
        'Get Started': 'Get Started',

        // Hero
        '🚀 Bridging Innovation East to West': '🚀 Bridging Innovation East to West',
        'Your Gateway to': 'Your Gateway to',
        'US Market Success': 'US Market Success',
        'AI Innovation': 'AI Innovation',
        'We help Asian companies thrive in the US market while transforming their operations with cutting-edge AI agents': 'We help Asian companies thrive in the US market while transforming their operations with cutting-edge AI agents',
        'Start Your US Journey →': 'Start Your US Journey →',
        'Explore AI Solutions': 'Explore AI Solutions',
        '50+ Companies Launched • $100M+ Raised • 500+ AI Agents Deployed': '50+ Companies Launched • $100M+ Raised • 500+ AI Agents Deployed',

        // Services
        'Land & Expand in the US': 'Land & Expand in the US',
        'Market Research & Analysis': 'Market Research & Analysis',
        'Business Transformation': 'Business Transformation',
        'Fundraising Strategy': 'Fundraising Strategy',
        'VC/Investor Connections': 'VC/Investor Connections',
        'Automate with AI Agents': 'Automate with AI Agents',
        'Custom AI Development': 'Custom AI Development',
        'Process Automation': 'Process Automation',
        '24/7 Operations': '24/7 Operations',
        'Human-AI Collaboration': 'Human-AI Collaboration',

        // US Market Details
        'Your Complete US Market Entry Solution': 'Your Complete US Market Entry Solution',
        'Market Intelligence': 'Market Intelligence',
        'Deep market research and competitive analysis': 'Deep market research and competitive analysis',
        'Adapt your business model for US success': 'Adapt your business model for US success',
        'Fundraising Excellence': 'Fundraising Excellence',
        'Pitch deck creation and investor prep': 'Pitch deck creation and investor prep',
        'VC Connections': 'VC Connections',
        'Direct access to top-tier VCs and angels': 'Direct access to top-tier VCs and angels',
        'Legal & Compliance': 'Legal & Compliance',
        'Navigate US regulations with confidence': 'Navigate US regulations with confidence',
        'Go-to-Market Strategy': 'Go-to-Market Strategy',
        'Launch strategies that drive growth': 'Launch strategies that drive growth',

        // AI Solutions
        'AI Agents That Work While You Sleep': 'AI Agents That Work While You Sleep',
        'Calculate Your AI ROI': 'Calculate Your AI ROI',
        'Monthly Savings:': 'Monthly Savings:',
        'Customer Service AI': 'Customer Service AI',
        '24/7 multilingual support': '24/7 multilingual support',
        '90% query resolution': '90% query resolution',
        'Sales AI Assistant': 'Sales AI Assistant',
        'Qualify leads automatically': 'Qualify leads automatically',
        '3x more conversions': '3x more conversions',
        'Data Processing AI': 'Data Processing AI',
        'Analyze documents in seconds': 'Analyze documents in seconds',
        '100x faster processing': '100x faster processing',
        'Content Generation AI': 'Content Generation AI',
        'Create personalized content at scale': 'Create personalized content at scale',
        '80% time saved': '80% time saved',

        // Process
        'From Vision to Victory': 'From Vision to Victory',
        'Discovery': 'Discovery',
        '2-3 weeks': '2-3 weeks',
        'Market analysis': 'Market analysis',
        'Business assessment': 'Business assessment',
        'Strategy': 'Strategy',
        '3-4 weeks': '3-4 weeks',
        'Entry plan creation': 'Entry plan creation',
        'Technical roadmap': 'Technical roadmap',
        'Implementation': 'Implementation',
        '8-12 weeks': '8-12 weeks',
        'Business setup': 'Business setup',
        'AI development': 'AI development',
        'Launch': 'Launch',
        '2-4 weeks': '2-4 weeks',
        'Market launch': 'Market launch',
        'System deployment': 'System deployment',
        'Scale': 'Scale',
        'Ongoing': 'Ongoing',
        'Growth optimization': 'Growth optimization',
        'Continuous support': 'Continuous support',

        // Success Stories
        'Transforming Businesses Across the Pacific': 'Transforming Businesses Across the Pacific',
        'Fintech': 'Fintech',
        'Manufacturing': 'Manufacturing',
        'E-commerce': 'E-commerce',
        'Challenge': 'Challenge',
        'Solution': 'Solution',
        'Result': 'Result',
        'Needed to adapt payment platform for US regulations': 'Needed to adapt payment platform for US regulations',
        'Complete business transformation and compliance setup': 'Complete business transformation and compliance setup',
        'Manual quality control processes causing delays': 'Manual quality control processes causing delays',
        'AI-powered automated inspection system': 'AI-powered automated inspection system',
        'Scaling customer support across time zones': 'Scaling customer support across time zones',
        '24/7 multilingual AI customer service agents': '24/7 multilingual AI customer service agents',

        // Why Daodong
        'East Meets West, Human Meets AI': 'East Meets West, Human Meets AI',
        'Bicultural Expertise': 'Bicultural Expertise',
        'Bridge between Asian and US markets': 'Bridge between Asian and US markets',
        'Technical Excellence': 'Technical Excellence',
        'Cutting-edge AI implementation': 'Cutting-edge AI implementation',
        'End-to-End Support': 'End-to-End Support',
        'From strategy to execution': 'From strategy to execution',
        'Proven Network': 'Proven Network',
        'Direct VC and partner connections': 'Direct VC and partner connections',
        'Rapid Deployment': 'Rapid Deployment',
        'Fast, efficient implementation': 'Fast, efficient implementation',
        'Measurable ROI': 'Measurable ROI',
        'Data-driven results': 'Data-driven results',

        // About
        'Leaders in Cross-Pacific Innovation': 'Leaders in Cross-Pacific Innovation',
        'Founded by veterans of Silicon Valley and Asian tech ecosystems, Daodong Technology bridges the gap between Eastern innovation and Western markets. Our unique bicultural perspective and technical expertise enable companies to succeed globally while leveraging the power of AI.': 'Founded by veterans of Silicon Valley and Asian tech ecosystems, Daodong Technology bridges the gap between Eastern innovation and Western markets. Our unique bicultural perspective and technical expertise enable companies to succeed globally while leveraging the power of AI.',
        'Excellence in Execution': 'Excellence in Execution',
        'Global Perspective': 'Global Perspective',
        'AI-First Innovation': 'AI-First Innovation',
        'Partnership Mindset': 'Partnership Mindset',
        'San Francisco, CA': 'San Francisco, CA',
        'US Headquarters': 'US Headquarters',
        'Taipei, Taiwan': 'Taipei, Taiwan',
        'Asia Operations': 'Asia Operations',

        // CTA
        'Ready to Transform Your Business?': 'Ready to Transform Your Business?',
        'US Market Entry': 'US Market Entry',
        'Launch in the US Market': 'Launch in the US Market',
        'Schedule Strategy Call': 'Schedule Strategy Call',
        'AI Implementation': 'AI Implementation',
        'Deploy AI Agents': 'Deploy AI Agents',
        'Get Free Demo': 'Get Free Demo',

        // Footer
        'Bridging Innovation East to West': 'Bridging Innovation East to West',
        'Company': 'Company',
        'About Us': 'About Us',
        'Success Stories': 'Success Stories',
        'Careers': 'Careers',
        'Our Process': 'Our Process',
        'All rights reserved.': 'All rights reserved.',
        'Privacy Policy': 'Privacy Policy',
        'Terms of Service': 'Terms of Service',

        // Chatbot
        'AI Assistant': 'AI Assistant',
        'Hello! How can I help you with US market entry or AI solutions?': 'Hello! How can I help you with US market entry or AI solutions?'
    },
    zh: {
        // Navigation
        'Services': '服務',
        'US Market Entry': '美國市場進入',
        'AI Solutions': 'AI解決方案',
        'About': '關於我們',
        'Contact': '聯繫我們',
        'Get Started': '開始使用',

        // Hero
        '🚀 Bridging Innovation East to West': '🚀 連接東西方創新',
        'Your Gateway to': '您通往',
        'US Market Success': '美國市場成功',
        'AI Innovation': 'AI創新',
        'We help Asian companies thrive in the US market while transforming their operations with cutting-edge AI agents': '我們幫助亞洲公司在美國市場蓬勃發展，同時通過先進的AI代理轉型運營',
        'Start Your US Journey →': '開始您的美國之旅 →',
        'Explore AI Solutions': '探索AI解決方案',
        '50+ Companies Launched • $100M+ Raised • 500+ AI Agents Deployed': '50+公司啟動 • $100M+融資 • 500+ AI代理部署',

        // Services
        'Land & Expand in the US': '在美國落地並擴張',
        'Market Research & Analysis': '市場研究與分析',
        'Business Transformation': '業務轉型',
        'Fundraising Strategy': '融資策略',
        'VC/Investor Connections': 'VC/投資者聯繫',
        'Automate with AI Agents': 'AI代理自動化',
        'Custom AI Development': '定制AI開發',
        'Process Automation': '流程自動化',
        '24/7 Operations': '24/7運營',
        'Human-AI Collaboration': '人機協作',

        // US Market Details
        'Your Complete US Market Entry Solution': '您完整的美國市場進入解決方案',
        'Market Intelligence': '市場情報',
        'Deep market research and competitive analysis': '深度市場研究和競爭分析',
        'Adapt your business model for US success': '調整您的商業模式以在美國成功',
        'Fundraising Excellence': '融資卓越',
        'Pitch deck creation and investor prep': '投資演示文稿創建和投資者準備',
        'VC Connections': 'VC聯繫',
        'Direct access to top-tier VCs and angels': '直接接觸頂級VC和天使投資人',
        'Legal & Compliance': '法律合規',
        'Navigate US regulations with confidence': '自信地處理美國法規',
        'Go-to-Market Strategy': '市場進入策略',
        'Launch strategies that drive growth': '推動增長的啟動策略',

        // AI Solutions
        'AI Agents That Work While You Sleep': '在您睡覺時工作的AI代理',
        'Calculate Your AI ROI': '計算您的AI投資回報率',
        'Monthly Savings:': '月度節省：',
        'Customer Service AI': '客戶服務AI',
        '24/7 multilingual support': '24/7多語言支持',
        '90% query resolution': '90%查詢解決率',
        'Sales AI Assistant': '銷售AI助手',
        'Qualify leads automatically': '自動篩選潛在客戶',
        '3x more conversions': '3倍轉化率',
        'Data Processing AI': '數據處理AI',
        'Analyze documents in seconds': '秒內分析文檔',
        '100x faster processing': '100倍處理速度',
        'Content Generation AI': '內容生成AI',
        'Create personalized content at scale': '大規模創建個性化內容',
        '80% time saved': '節省80%時間',

        // Process
        'From Vision to Victory': '從願景到勝利',
        'Discovery': '發現',
        '2-3 weeks': '2-3週',
        'Market analysis': '市場分析',
        'Business assessment': '業務評估',
        'Strategy': '策略',
        '3-4 weeks': '3-4週',
        'Entry plan creation': '進入計劃制定',
        'Technical roadmap': '技術路線圖',
        'Implementation': '實施',
        '8-12 weeks': '8-12週',
        'Business setup': '業務設置',
        'AI development': 'AI開發',
        'Launch': '啟動',
        '2-4 weeks': '2-4週',
        'Market launch': '市場啟動',
        'System deployment': '系統部署',
        'Scale': '擴展',
        'Ongoing': '持續',
        'Growth optimization': '增長優化',
        'Continuous support': '持續支持',

        // Success Stories
        'Transforming Businesses Across the Pacific': '跨太平洋業務轉型',
        'Fintech': '金融科技',
        'Manufacturing': '製造業',
        'E-commerce': '電子商務',
        'Challenge': '挑戰',
        'Solution': '解決方案',
        'Result': '結果',
        'Needed to adapt payment platform for US regulations': '需要調整支付平台以符合美國法規',
        'Complete business transformation and compliance setup': '完整的業務轉型和合規設置',
        'Manual quality control processes causing delays': '手動質量控制流程導致延誤',
        'AI-powered automated inspection system': 'AI驅動的自動檢測系統',
        'Scaling customer support across time zones': '跨時區擴展客戶支持',
        '24/7 multilingual AI customer service agents': '24/7多語言AI客戶服務代理',

        // Why Daodong
        'East Meets West, Human Meets AI': '東西方交匯，人機結合',
        'Bicultural Expertise': '雙文化專業知識',
        'Bridge between Asian and US markets': '亞洲和美國市場的橋樑',
        'Technical Excellence': '技術卓越',
        'Cutting-edge AI implementation': '先進的AI實施',
        'End-to-End Support': '端到端支持',
        'From strategy to execution': '從策略到執行',
        'Proven Network': '經驗證的網絡',
        'Direct VC and partner connections': '直接的VC和合作夥伴聯繫',
        'Rapid Deployment': '快速部署',
        'Fast, efficient implementation': '快速、高效的實施',
        'Measurable ROI': '可衡量的投資回報率',
        'Data-driven results': '數據驅動的結果',

        // About
        'Leaders in Cross-Pacific Innovation': '跨太平洋創新領導者',
        'Founded by veterans of Silicon Valley and Asian tech ecosystems, Daodong Technology bridges the gap between Eastern innovation and Western markets. Our unique bicultural perspective and technical expertise enable companies to succeed globally while leveraging the power of AI.': '由矽谷和亞洲科技生態系統的資深人士創立，道東科技連接了東方創新和西方市場之間的橋樑。我們獨特的雙文化視角和技術專長使公司能夠在全球範圍內成功，同時利用AI的力量。',
        'Excellence in Execution': '執行卓越',
        'Global Perspective': '全球視野',
        'AI-First Innovation': 'AI優先創新',
        'Partnership Mindset': '合作夥伴心態',
        'San Francisco, CA': '加州舊金山',
        'US Headquarters': '美國總部',
        'Taipei, Taiwan': '台灣台北',
        'Asia Operations': '亞洲運營',

        // CTA
        'Ready to Transform Your Business?': '準備好轉型您的業務了嗎？',
        'US Market Entry': '美國市場進入',
        'Launch in the US Market': '在美國市場啟動',
        'Schedule Strategy Call': '安排策略電話',
        'AI Implementation': 'AI實施',
        'Deploy AI Agents': '部署AI代理',
        'Get Free Demo': '獲得免費演示',

        // Footer
        'Bridging Innovation East to West': '連接東西方創新',
        'Company': '公司',
        'About Us': '關於我們',
        'Success Stories': '成功案例',
        'Careers': '職業機會',
        'Our Process': '我們的流程',
        'All rights reserved.': '版權所有。',
        'Privacy Policy': '隱私政策',
        'Terms of Service': '服務條款',

        // Chatbot
        'AI Assistant': 'AI助手',
        'Hello! How can I help you with US market entry or AI solutions?': '您好！我如何幫助您進入美國市場或AI解決方案？'
    }
};

// Global variables
let currentLanguage = 'zh';
let isScrolling = false;

// DOM Content Loaded
document.addEventListener('DOMContentLoaded', function() {
    initializeWebsite();
});

// Initialize website functionality
function initializeWebsite() {
    setupLanguageToggle();
    setupMobileNavigation();
    setupScrollEffects();
    setupAnimations();
    setupROICalculator();
    setupChatbot();
    setupSmoothScrolling();
    setupHeroButtons();
    createScrollProgressBar();
    setupIntersectionObserver();
}

// Language Toggle Functionality
function setupLanguageToggle() {
    const langButtons = document.querySelectorAll('.lang-btn');
    
    langButtons.forEach(btn => {
        btn.addEventListener('click', () => {
            const lang = btn.getAttribute('data-lang');
            switchLanguage(lang);
            
            // Update active button
            langButtons.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        });
    });
}

function switchLanguage(lang) {
    currentLanguage = lang;
    const elements = document.querySelectorAll(`[data-${lang}]`);
    
    elements.forEach(element => {
        const text = element.getAttribute(`data-${lang}`);
        if (text) {
            if (element.tagName === 'INPUT') {
                element.placeholder = text;
            } else {
                element.textContent = text;
            }
        }
    });

    // Update chatbot messages
    updateChatbotLanguage();
    
    // Store language preference
    localStorage.setItem('preferredLanguage', lang);
}

// Load saved language preference
function loadLanguagePreference() {
    const savedLang = localStorage.getItem('preferredLanguage');
    if (savedLang && savedLang !== currentLanguage) {
        switchLanguage(savedLang);
        document.querySelector(`[data-lang="${savedLang}"]`).classList.add('active');
        document.querySelector(`[data-lang="${currentLanguage}"]`).classList.remove('active');
    }
}

// Mobile Navigation
function setupMobileNavigation() {
    const hamburger = document.getElementById('hamburger');
    const navMenu = document.getElementById('nav-menu');
    
    hamburger.addEventListener('click', () => {
        hamburger.classList.toggle('active');
        navMenu.classList.toggle('active');
    });
    
    // Close mobile menu when clicking on links
    const navLinks = document.querySelectorAll('.nav-link');
    navLinks.forEach(link => {
        link.addEventListener('click', () => {
            hamburger.classList.remove('active');
            navMenu.classList.remove('active');
        });
    });
    
    // Close mobile menu when clicking outside
    document.addEventListener('click', (e) => {
        if (!navMenu.contains(e.target) && !hamburger.contains(e.target)) {
            hamburger.classList.remove('active');
            navMenu.classList.remove('active');
        }
    });
}

// Scroll Effects
function setupScrollEffects() {
    const navbar = document.getElementById('navbar');
    let lastScrollTop = 0;
    
    window.addEventListener('scroll', () => {
        if (isScrolling) return;
        
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        
        // Navbar background effect
        if (scrollTop > 100) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
        
        // Hide/show navbar on scroll
        if (scrollTop > lastScrollTop && scrollTop > 200) {
            navbar.style.transform = 'translateY(-100%)';
        } else {
            navbar.style.transform = 'translateY(0)';
        }
        
        lastScrollTop = scrollTop;
        
        // Update scroll progress
        updateScrollProgress();
    });
}

// Create and update scroll progress bar
function createScrollProgressBar() {
    const progressBar = document.createElement('div');
    progressBar.className = 'scroll-progress';
    document.body.appendChild(progressBar);
}

function updateScrollProgress() {
    const progressBar = document.querySelector('.scroll-progress');
    const windowHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    const scrolled = (window.scrollY / windowHeight) * 100;
    progressBar.style.width = scrolled + '%';
}

// Intersection Observer for animations
function setupIntersectionObserver() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('in-view');
                
                // Animate counters
                if (entry.target.classList.contains('counter')) {
                    animateCounter(entry.target);
                }
                
                // Special handling for differentiators
                if (entry.target.classList.contains('why-daodong')) {
                    const differentiators = entry.target.querySelectorAll('.differentiator');
                    differentiators.forEach((diff, index) => {
                        setTimeout(() => {
                            diff.classList.add('animate');
                        }, index * 100);
                    });
                }
            }
        });
    }, observerOptions);
    
    // Observe elements for animation
    const animateElements = document.querySelectorAll('.animate-on-scroll, .why-daodong');
    animateElements.forEach(el => {
        observer.observe(el);
    });
    
    // Add animate class to elements
    const sectionsToAnimate = document.querySelectorAll('section > .container > *');
    sectionsToAnimate.forEach(el => {
        el.classList.add('animate-on-scroll');
        observer.observe(el);
    });
}

// Setup animations
function setupAnimations() {
    // Particle animation
    createParticleAnimation();
    
    // Service card hover effects
    const serviceCards = document.querySelectorAll('.service-card');
    serviceCards.forEach(card => {
        card.addEventListener('mouseenter', () => {
            card.style.transform = 'translateY(-8px) scale(1.02)';
        });
        
        card.addEventListener('mouseleave', () => {
            card.style.transform = 'translateY(0) scale(1)';
        });
    });
    
    // Button ripple effect
    const buttons = document.querySelectorAll('.btn');
    buttons.forEach(button => {
        button.addEventListener('click', createRipple);
    });
}

function createParticleAnimation() {
    const particleSystem = document.querySelector('.particle-system');
    if (!particleSystem) return;
    
    // Create floating particles
    for (let i = 0; i < 20; i++) {
        const particle = document.createElement('div');
        particle.style.cssText = `
            position: absolute;
            width: ${Math.random() * 4 + 2}px;
            height: ${Math.random() * 4 + 2}px;
            background: rgba(249, 115, 22, ${Math.random() * 0.5 + 0.1});
            border-radius: 50%;
            left: ${Math.random() * 100}%;
            top: ${Math.random() * 100}%;
            animation: float ${Math.random() * 10 + 10}s linear infinite;
            animation-delay: ${Math.random() * 5}s;
        `;
        particleSystem.appendChild(particle);
    }
    
    // Add CSS for particle animation
    const style = document.createElement('style');
    style.textContent = `
        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }
    `;
    document.head.appendChild(style);
}

function createRipple(e) {
    const button = e.currentTarget;
    const ripple = document.createElement('span');
    const rect = button.getBoundingClientRect();
    const size = Math.max(rect.width, rect.height);
    const x = e.clientX - rect.left - size / 2;
    const y = e.clientY - rect.top - size / 2;
    
    ripple.style.cssText = `
        position: absolute;
        width: ${size}px;
        height: ${size}px;
        left: ${x}px;
        top: ${y}px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        transform: scale(0);
        animation: ripple 0.6s linear;
        pointer-events: none;
    `;
    
    button.style.position = 'relative';
    button.style.overflow = 'hidden';
    button.appendChild(ripple);
    
    setTimeout(() => {
        ripple.remove();
    }, 600);
}

// Add ripple animation CSS
const rippleStyle = document.createElement('style');
rippleStyle.textContent = `
    @keyframes ripple {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }
`;
document.head.appendChild(rippleStyle);

// ROI Calculator
function setupROICalculator() {
    const monthlyTasks = document.getElementById('monthly-tasks');
    const hoursPerTask = document.getElementById('hours-per-task');
    const hourlyRate = document.getElementById('hourly-rate');
    const savingsAmount = document.querySelector('.savings-amount');
    
    function calculateROI() {
        const tasks = parseFloat(monthlyTasks.value) || 0;
        const hours = parseFloat(hoursPerTask.value) || 0;
        const rate = parseFloat(hourlyRate.value) || 0;
        
        // Assume AI can automate 70% of tasks
        const savings = tasks * hours * rate * 0.7;
        savingsAmount.textContent = `$${savings.toLocaleString()}`;
        
        // Add animation to the result
        savingsAmount.style.transform = 'scale(1.1)';
        setTimeout(() => {
            savingsAmount.style.transform = 'scale(1)';
        }, 200);
    }
    
    [monthlyTasks, hoursPerTask, hourlyRate].forEach(input => {
        if (input) {
            input.addEventListener('input', calculateROI);
        }
    });
}

// Chatbot functionality
function setupChatbot() {
    const chatbotToggle = document.getElementById('chatbot-toggle');
    const chatbotWindow = document.getElementById('chatbot-window');
    const chatbotClose = document.getElementById('chatbot-close');
    const chatbotInput = document.getElementById('chatbot-input');
    const chatbotSend = document.getElementById('chatbot-send');
    const chatbotMessages = document.getElementById('chatbot-messages');
    
    // Toggle chatbot
    chatbotToggle.addEventListener('click', () => {
        chatbotWindow.classList.toggle('active');
    });
    
    // Close chatbot
    chatbotClose.addEventListener('click', () => {
        chatbotWindow.classList.remove('active');
    });
    
    // Send message
    function sendMessage() {
        const message = chatbotInput.value.trim();
        if (!message) return;
        
        // Add user message
        addMessage(message, 'user');
        chatbotInput.value = '';
        
        // Simulate AI response
        setTimeout(() => {
            const response = generateAIResponse(message);
            addMessage(response, 'bot');
        }, 1000);
    }
    
    chatbotSend.addEventListener('click', sendMessage);
    chatbotInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            sendMessage();
        }
    });
    
    function addMessage(text, sender) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${sender}-message`;
        messageDiv.textContent = text;
        chatbotMessages.appendChild(messageDiv);
        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
    }
    
    function generateAIResponse(userMessage) {
        const responses = {
            en: [
                "I'd be happy to help you with US market entry strategies!",
                "Our AI solutions can save your business significant time and resources.",
                "Let me connect you with one of our specialists.",
                "Would you like to schedule a free consultation?",
                "Our team has helped 50+ companies successfully enter the US market."
            ],
            zh: [
                "我很樂意幫助您制定美國市場進入策略！",
                "我們的AI解決方案可以為您的業務節省大量時間和資源。",
                "讓我為您聯繫我們的專家。",
                "您想安排免費諮詢嗎？",
                "我們的團隊已經幫助50多家公司成功進入美國市場。"
            ]
        };
        
        const responseList = responses[currentLanguage] || responses.en;
        return responseList[Math.floor(Math.random() * responseList.length)];
    }
}

function updateChatbotLanguage() {
    const botMessages = document.querySelectorAll('.bot-message');
    botMessages.forEach(msg => {
        if (msg.textContent.includes('Hello!') || msg.textContent.includes('您好！')) {
            const text = currentLanguage === 'zh' 
                ? '您好！我如何幫助您進入美國市場或AI解決方案？'
                : 'Hello! How can I help you with US market entry or AI solutions?';
            msg.textContent = text;
        }
    });
}

// Hero buttons functionality
function setupHeroButtons() {
    // Get the hero buttons
    const usJourneyBtn = document.querySelector('.btn-primary');
    const aiSolutionsBtn = document.querySelector('.btn-secondary');
    
    // Add click handlers
    if (usJourneyBtn) {
        usJourneyBtn.addEventListener('click', (e) => {
            e.preventDefault();
            scrollToSection('#us-market');
            trackEvent('cta_clicked', { button: 'start_us_journey' });
        });
    }
    
    if (aiSolutionsBtn) {
        aiSolutionsBtn.addEventListener('click', (e) => {
            e.preventDefault();
            scrollToSection('#ai-solutions');
            trackEvent('cta_clicked', { button: 'explore_ai_solutions' });
        });
    }
}

// Smooth scrolling utility function
function scrollToSection(targetId) {
    const targetSection = document.querySelector(targetId);
    
    if (targetSection) {
        const offsetTop = targetSection.offsetTop - 80; // Account for fixed navbar
        
        window.scrollTo({
            top: offsetTop,
            behavior: 'smooth'
        });
    }
}

// Smooth scrolling for navigation links
function setupSmoothScrolling() {
    const navLinks = document.querySelectorAll('a[href^="#"]');
    
    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = link.getAttribute('href');
            scrollToSection(targetId);
        });
    });
}

// Counter animation
function animateCounter(element) {
    const target = parseInt(element.getAttribute('data-target'));
    const duration = 2000;
    const start = 0;
    const increment = target / (duration / 16);
    let current = start;
    
    const timer = setInterval(() => {
        current += increment;
        element.textContent = Math.floor(current);
        
        if (current >= target) {
            element.textContent = target;
            clearInterval(timer);
        }
    }, 16);
}

// Performance optimization
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Optimize scroll events
const debouncedScrollHandler = debounce(() => {
    isScrolling = false;
}, 100);

window.addEventListener('scroll', () => {
    isScrolling = true;
    debouncedScrollHandler();
});

// Lazy loading for images
function setupLazyLoading() {
    const images = document.querySelectorAll('img[data-src]');
    const imageObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                img.src = img.dataset.src;
                img.classList.remove('lazy');
                imageObserver.unobserve(img);
            }
        });
    });
    
    images.forEach(img => imageObserver.observe(img));
}

// Form validation and submission
function setupFormHandling() {
    const forms = document.querySelectorAll('form');
    
    forms.forEach(form => {
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Basic form validation
            const inputs = form.querySelectorAll('input[required]');
            let isValid = true;
            
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    isValid = false;
                    input.classList.add('error');
                } else {
                    input.classList.remove('error');
                }
            });
            
            if (isValid) {
                // Simulate form submission
                showNotification('Form submitted successfully!');
                form.reset();
            } else {
                showNotification('Please fill in all required fields.');
            }
        });
    });
}

// Notification system
function showNotification(message, type = 'success') {
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.textContent = message;
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? '#10B981' : '#EF4444'};
        color: white;
        padding: 16px 24px;
        border-radius: 8px;
        z-index: 10000;
        transform: translateX(100%);
        transition: transform 0.3s ease;
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.transform = 'translateX(0)';
    }, 100);
    
    setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
            notification.remove();
        }, 300);
    }, 3000);
}

// Analytics tracking (placeholder)
function trackEvent(eventName, properties = {}) {
    // This would integrate with your analytics service
    console.log('Event tracked:', eventName, properties);
}

// Error handling
window.addEventListener('error', (e) => {
    console.error('JavaScript error:', e.error);
    // You could send this to an error tracking service
});

// Initialize everything when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
    initializeWebsite();
    setupLazyLoading();
    setupFormHandling();
    
    // Set default language to Chinese if no preference is saved
    const savedLang = localStorage.getItem('preferredLanguage');
    if (!savedLang) {
        switchLanguage('zh'); // Initialize with Chinese
    } else {
        loadLanguagePreference();
    }
    
    // Track page load
    trackEvent('page_loaded', {
        page: 'homepage',
        language: currentLanguage
    });
});

// Service Worker registration for offline functionality
if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
            .then(registration => {
                console.log('SW registered: ', registration);
            })
            .catch(registrationError => {
                console.log('SW registration failed: ', registrationError);
            });
    });
}