// Language translations
const translations = {
    en: {
        // Navigation
        'Services': 'Services',
        'US Market Entry': 'US Market Entry',
        'AI Solutions': 'AI Solutions',
        'About': 'About',
        'Contact': 'Contact',
        'Get Started': 'Get Started',

        // Hero
        'ðŸš€ Bridging Innovation East to West': 'ðŸš€ Bridging Innovation East to West',
        'Your Gateway to': 'Your Gateway to',
        'US Market Success': 'US Market Success',
        'AI Innovation': 'AI Innovation',
        'We help Asian companies thrive in the US market while transforming their operations with cutting-edge AI agents': 'We help Asian companies thrive in the US market while transforming their operations with cutting-edge AI agents',
        'Start Your US Journey â†’': 'Start Your US Journey â†’',
        'Explore AI Solutions': 'Explore AI Solutions',
        '50+ Companies Launched â€¢ $100M+ Raised â€¢ 500+ AI Agents Deployed': '50+ Companies Launched â€¢ $100M+ Raised â€¢ 500+ AI Agents Deployed',

        // Services
        'Land & Expand in the US': 'Land & Expand in the US',
        'Market Research & Analysis': 'Market Research & Analysis',
        'Business Transformation': 'Business Transformation',
        'Fundraising Strategy': 'Fundraising Strategy',
        'VC/Investor Connections': 'VC/Investor Connections',
        'Automate with AI Agents': 'Automate with AI Agents',
        'Custom AI Development': 'Custom AI Development',
        'Process Automation': 'Process Automation',
        '24/7 Operations': '24/7 Operations',
        'Human-AI Collaboration': 'Human-AI Collaboration',

        // US Market Details
        'Your Complete US Market Entry Solution': 'Your Complete US Market Entry Solution',
        'Market Intelligence': 'Market Intelligence',
        'Deep market research and competitive analysis': 'Deep market research and competitive analysis',
        'Adapt your business model for US success': 'Adapt your business model for US success',
        'Fundraising Excellence': 'Fundraising Excellence',
        'Pitch deck creation and investor prep': 'Pitch deck creation and investor prep',
        'VC Connections': 'VC Connections',
        'Direct access to top-tier VCs and angels': 'Direct access to top-tier VCs and angels',
        'Legal & Compliance': 'Legal & Compliance',
        'Navigate US regulations with confidence': 'Navigate US regulations with confidence',
        'Go-to-Market Strategy': 'Go-to-Market Strategy',
        'Launch strategies that drive growth': 'Launch strategies that drive growth',

        // AI Solutions
        'AI Agents That Work While You Sleep': 'AI Agents That Work While You Sleep',
        'Calculate Your AI ROI': 'Calculate Your AI ROI',
        'Monthly Savings:': 'Monthly Savings:',
        'Customer Service AI': 'Customer Service AI',
        '24/7 multilingual support': '24/7 multilingual support',
        '90% query resolution': '90% query resolution',
        'Sales AI Assistant': 'Sales AI Assistant',
        'Qualify leads automatically': 'Qualify leads automatically',
        '3x more conversions': '3x more conversions',
        'Data Processing AI': 'Data Processing AI',
        'Analyze documents in seconds': 'Analyze documents in seconds',
        '100x faster processing': '100x faster processing',
        'Content Generation AI': 'Content Generation AI',
        'Create personalized content at scale': 'Create personalized content at scale',
        '80% time saved': '80% time saved',

        // Process
        'From Vision to Victory': 'From Vision to Victory',
        'Discovery': 'Discovery',
        '2-3 weeks': '2-3 weeks',
        'Market analysis': 'Market analysis',
        'Business assessment': 'Business assessment',
        'Strategy': 'Strategy',
        '3-4 weeks': '3-4 weeks',
        'Entry plan creation': 'Entry plan creation',
        'Technical roadmap': 'Technical roadmap',
        'Implementation': 'Implementation',
        '8-12 weeks': '8-12 weeks',
        'Business setup': 'Business setup',
        'AI development': 'AI development',
        'Launch': 'Launch',
        '2-4 weeks': '2-4 weeks',
        'Market launch': 'Market launch',
        'System deployment': 'System deployment',
        'Scale': 'Scale',
        'Ongoing': 'Ongoing',
        'Growth optimization': 'Growth optimization',
        'Continuous support': 'Continuous support',

        // Success Stories
        'Transforming Businesses Across the Pacific': 'Transforming Businesses Across the Pacific',
        'Fintech': 'Fintech',
        'Manufacturing': 'Manufacturing',
        'E-commerce': 'E-commerce',
        'Challenge': 'Challenge',
        'Solution': 'Solution',
        'Result': 'Result',
        'Needed to adapt payment platform for US regulations': 'Needed to adapt payment platform for US regulations',
        'Complete business transformation and compliance setup': 'Complete business transformation and compliance setup',
        'Manual quality control processes causing delays': 'Manual quality control processes causing delays',
        'AI-powered automated inspection system': 'AI-powered automated inspection system',
        'Scaling customer support across time zones': 'Scaling customer support across time zones',
        '24/7 multilingual AI customer service agents': '24/7 multilingual AI customer service agents',

        // Why Daodong
        'East Meets West, Human Meets AI': 'East Meets West, Human Meets AI',
        'Bicultural Expertise': 'Bicultural Expertise',
        'Bridge between Asian and US markets': 'Bridge between Asian and US markets',
        'Technical Excellence': 'Technical Excellence',
        'Cutting-edge AI implementation': 'Cutting-edge AI implementation',
        'End-to-End Support': 'End-to-End Support',
        'From strategy to execution': 'From strategy to execution',
        'Proven Network': 'Proven Network',
        'Direct VC and partner connections': 'Direct VC and partner connections',
        'Rapid Deployment': 'Rapid Deployment',
        'Fast, efficient implementation': 'Fast, efficient implementation',
        'Measurable ROI': 'Measurable ROI',
        'Data-driven results': 'Data-driven results',

        // About
        'Leaders in Cross-Pacific Innovation': 'Leaders in Cross-Pacific Innovation',
        'Founded by veterans of Silicon Valley and Asian tech ecosystems, Daodong Technology bridges the gap between Eastern innovation and Western markets. Our unique bicultural perspective and technical expertise enable companies to succeed globally while leveraging the power of AI.': 'Founded by veterans of Silicon Valley and Asian tech ecosystems, Daodong Technology bridges the gap between Eastern innovation and Western markets. Our unique bicultural perspective and technical expertise enable companies to succeed globally while leveraging the power of AI.',
        'Excellence in Execution': 'Excellence in Execution',
        'Global Perspective': 'Global Perspective',
        'AI-First Innovation': 'AI-First Innovation',
        'Partnership Mindset': 'Partnership Mindset',
        'San Francisco, CA': 'San Francisco, CA',
        'US Headquarters': 'US Headquarters',
        'Taipei, Taiwan': 'Taipei, Taiwan',
        'Asia Operations': 'Asia Operations',

        // CTA
        'Ready to Transform Your Business?': 'Ready to Transform Your Business?',
        'US Market Entry': 'US Market Entry',
        'Launch in the US Market': 'Launch in the US Market',
        'Schedule Strategy Call': 'Schedule Strategy Call',
        'AI Implementation': 'AI Implementation',
        'Deploy AI Agents': 'Deploy AI Agents',
        'Get Free Demo': 'Get Free Demo',

        // Footer
        'Bridging Innovation East to West': 'Bridging Innovation East to West',
        'Company': 'Company',
        'About Us': 'About Us',
        'Success Stories': 'Success Stories',
        'Careers': 'Careers',
        'Our Process': 'Our Process',
        'All rights reserved.': 'All rights reserved.',
        'Privacy Policy': 'Privacy Policy',
        'Terms of Service': 'Terms of Service',

        // Chatbot
        'AI Assistant': 'AI Assistant',
        'Hello! How can I help you with US market entry or AI solutions?': 'Hello! How can I help you with US market entry or AI solutions?'
    },
    zh: {
        // Navigation
        'Services': 'æœå‹™',
        'US Market Entry': 'ç¾Žåœ‹å¸‚å ´é€²å…¥',
        'AI Solutions': 'AIè§£æ±ºæ–¹æ¡ˆ',
        'About': 'é—œæ–¼æˆ‘å€‘',
        'Contact': 'è¯ç¹«æˆ‘å€‘',
        'Get Started': 'é–‹å§‹ä½¿ç”¨',

        // Hero
        'ðŸš€ Bridging Innovation East to West': 'ðŸš€ é€£æŽ¥æ±è¥¿æ–¹å‰µæ–°',
        'Your Gateway to': 'æ‚¨é€šå¾€',
        'US Market Success': 'ç¾Žåœ‹å¸‚å ´æˆåŠŸ',
        'AI Innovation': 'AIå‰µæ–°',
        'We help Asian companies thrive in the US market while transforming their operations with cutting-edge AI agents': 'æˆ‘å€‘å¹«åŠ©äºžæ´²å…¬å¸åœ¨ç¾Žåœ‹å¸‚å ´è“¬å‹ƒç™¼å±•ï¼ŒåŒæ™‚é€šéŽå…ˆé€²çš„AIä»£ç†è½‰åž‹é‹ç‡Ÿ',
        'Start Your US Journey â†’': 'é–‹å§‹æ‚¨çš„ç¾Žåœ‹ä¹‹æ—… â†’',
        'Explore AI Solutions': 'æŽ¢ç´¢AIè§£æ±ºæ–¹æ¡ˆ',
        '50+ Companies Launched â€¢ $100M+ Raised â€¢ 500+ AI Agents Deployed': '50+å…¬å¸å•Ÿå‹• â€¢ $100M+èžè³‡ â€¢ 500+ AIä»£ç†éƒ¨ç½²',

        // Services
        'Land & Expand in the US': 'åœ¨ç¾Žåœ‹è½åœ°ä¸¦æ“´å¼µ',
        'Market Research & Analysis': 'å¸‚å ´ç ”ç©¶èˆ‡åˆ†æž',
        'Business Transformation': 'æ¥­å‹™è½‰åž‹',
        'Fundraising Strategy': 'èžè³‡ç­–ç•¥',
        'VC/Investor Connections': 'VC/æŠ•è³‡è€…è¯ç¹«',
        'Automate with AI Agents': 'AIä»£ç†è‡ªå‹•åŒ–',
        'Custom AI Development': 'å®šåˆ¶AIé–‹ç™¼',
        'Process Automation': 'æµç¨‹è‡ªå‹•åŒ–',
        '24/7 Operations': '24/7é‹ç‡Ÿ',
        'Human-AI Collaboration': 'äººæ©Ÿå”ä½œ',

        // US Market Details
        'Your Complete US Market Entry Solution': 'æ‚¨å®Œæ•´çš„ç¾Žåœ‹å¸‚å ´é€²å…¥è§£æ±ºæ–¹æ¡ˆ',
        'Market Intelligence': 'å¸‚å ´æƒ…å ±',
        'Deep market research and competitive analysis': 'æ·±åº¦å¸‚å ´ç ”ç©¶å’Œç«¶çˆ­åˆ†æž',
        'Adapt your business model for US success': 'èª¿æ•´æ‚¨çš„å•†æ¥­æ¨¡å¼ä»¥åœ¨ç¾Žåœ‹æˆåŠŸ',
        'Fundraising Excellence': 'èžè³‡å“è¶Š',
        'Pitch deck creation and investor prep': 'æŠ•è³‡æ¼”ç¤ºæ–‡ç¨¿å‰µå»ºå’ŒæŠ•è³‡è€…æº–å‚™',
        'VC Connections': 'VCè¯ç¹«',
        'Direct access to top-tier VCs and angels': 'ç›´æŽ¥æŽ¥è§¸é ‚ç´šVCå’Œå¤©ä½¿æŠ•è³‡äºº',
        'Legal & Compliance': 'æ³•å¾‹åˆè¦',
        'Navigate US regulations with confidence': 'è‡ªä¿¡åœ°è™•ç†ç¾Žåœ‹æ³•è¦',
        'Go-to-Market Strategy': 'å¸‚å ´é€²å…¥ç­–ç•¥',
        'Launch strategies that drive growth': 'æŽ¨å‹•å¢žé•·çš„å•Ÿå‹•ç­–ç•¥',

        // AI Solutions
        'AI Agents That Work While You Sleep': 'åœ¨æ‚¨ç¡è¦ºæ™‚å·¥ä½œçš„AIä»£ç†',
        'Calculate Your AI ROI': 'è¨ˆç®—æ‚¨çš„AIæŠ•è³‡å›žå ±çŽ‡',
        'Monthly Savings:': 'æœˆåº¦ç¯€çœï¼š',
        'Customer Service AI': 'å®¢æˆ¶æœå‹™AI',
        '24/7 multilingual support': '24/7å¤šèªžè¨€æ”¯æŒ',
        '90% query resolution': '90%æŸ¥è©¢è§£æ±ºçŽ‡',
        'Sales AI Assistant': 'éŠ·å”®AIåŠ©æ‰‹',
        'Qualify leads automatically': 'è‡ªå‹•ç¯©é¸æ½›åœ¨å®¢æˆ¶',
        '3x more conversions': '3å€è½‰åŒ–çŽ‡',
        'Data Processing AI': 'æ•¸æ“šè™•ç†AI',
        'Analyze documents in seconds': 'ç§’å…§åˆ†æžæ–‡æª”',
        '100x faster processing': '100å€è™•ç†é€Ÿåº¦',
        'Content Generation AI': 'å…§å®¹ç”ŸæˆAI',
        'Create personalized content at scale': 'å¤§è¦æ¨¡å‰µå»ºå€‹æ€§åŒ–å…§å®¹',
        '80% time saved': 'ç¯€çœ80%æ™‚é–“',

        // Process
        'From Vision to Victory': 'å¾žé¡˜æ™¯åˆ°å‹åˆ©',
        'Discovery': 'ç™¼ç¾',
        '2-3 weeks': '2-3é€±',
        'Market analysis': 'å¸‚å ´åˆ†æž',
        'Business assessment': 'æ¥­å‹™è©•ä¼°',
        'Strategy': 'ç­–ç•¥',
        '3-4 weeks': '3-4é€±',
        'Entry plan creation': 'é€²å…¥è¨ˆåŠƒåˆ¶å®š',
        'Technical roadmap': 'æŠ€è¡“è·¯ç·šåœ–',
        'Implementation': 'å¯¦æ–½',
        '8-12 weeks': '8-12é€±',
        'Business setup': 'æ¥­å‹™è¨­ç½®',
        'AI development': 'AIé–‹ç™¼',
        'Launch': 'å•Ÿå‹•',
        '2-4 weeks': '2-4é€±',
        'Market launch': 'å¸‚å ´å•Ÿå‹•',
        'System deployment': 'ç³»çµ±éƒ¨ç½²',
        'Scale': 'æ“´å±•',
        'Ongoing': 'æŒçºŒ',
        'Growth optimization': 'å¢žé•·å„ªåŒ–',
        'Continuous support': 'æŒçºŒæ”¯æŒ',

        // Success Stories
        'Transforming Businesses Across the Pacific': 'è·¨å¤ªå¹³æ´‹æ¥­å‹™è½‰åž‹',
        'Fintech': 'é‡‘èžç§‘æŠ€',
        'Manufacturing': 'è£½é€ æ¥­',
        'E-commerce': 'é›»å­å•†å‹™',
        'Challenge': 'æŒ‘æˆ°',
        'Solution': 'è§£æ±ºæ–¹æ¡ˆ',
        'Result': 'çµæžœ',
        'Needed to adapt payment platform for US regulations': 'éœ€è¦èª¿æ•´æ”¯ä»˜å¹³å°ä»¥ç¬¦åˆç¾Žåœ‹æ³•è¦',
        'Complete business transformation and compliance setup': 'å®Œæ•´çš„æ¥­å‹™è½‰åž‹å’Œåˆè¦è¨­ç½®',
        'Manual quality control processes causing delays': 'æ‰‹å‹•è³ªé‡æŽ§åˆ¶æµç¨‹å°Žè‡´å»¶èª¤',
        'AI-powered automated inspection system': 'AIé©…å‹•çš„è‡ªå‹•æª¢æ¸¬ç³»çµ±',
        'Scaling customer support across time zones': 'è·¨æ™‚å€æ“´å±•å®¢æˆ¶æ”¯æŒ',
        '24/7 multilingual AI customer service agents': '24/7å¤šèªžè¨€AIå®¢æˆ¶æœå‹™ä»£ç†',

        // Why Daodong
        'East Meets West, Human Meets AI': 'æ±è¥¿æ–¹äº¤åŒ¯ï¼Œäººæ©Ÿçµåˆ',
        'Bicultural Expertise': 'é›™æ–‡åŒ–å°ˆæ¥­çŸ¥è­˜',
        'Bridge between Asian and US markets': 'äºžæ´²å’Œç¾Žåœ‹å¸‚å ´çš„æ©‹æ¨‘',
        'Technical Excellence': 'æŠ€è¡“å“è¶Š',
        'Cutting-edge AI implementation': 'å…ˆé€²çš„AIå¯¦æ–½',
        'End-to-End Support': 'ç«¯åˆ°ç«¯æ”¯æŒ',
        'From strategy to execution': 'å¾žç­–ç•¥åˆ°åŸ·è¡Œ',
        'Proven Network': 'ç¶“é©—è­‰çš„ç¶²çµ¡',
        'Direct VC and partner connections': 'ç›´æŽ¥çš„VCå’Œåˆä½œå¤¥ä¼´è¯ç¹«',
        'Rapid Deployment': 'å¿«é€Ÿéƒ¨ç½²',
        'Fast, efficient implementation': 'å¿«é€Ÿã€é«˜æ•ˆçš„å¯¦æ–½',
        'Measurable ROI': 'å¯è¡¡é‡çš„æŠ•è³‡å›žå ±çŽ‡',
        'Data-driven results': 'æ•¸æ“šé©…å‹•çš„çµæžœ',

        // About
        'Leaders in Cross-Pacific Innovation': 'è·¨å¤ªå¹³æ´‹å‰µæ–°é ˜å°Žè€…',
        'Founded by veterans of Silicon Valley and Asian tech ecosystems, Daodong Technology bridges the gap between Eastern innovation and Western markets. Our unique bicultural perspective and technical expertise enable companies to succeed globally while leveraging the power of AI.': 'ç”±çŸ½è°·å’Œäºžæ´²ç§‘æŠ€ç”Ÿæ…‹ç³»çµ±çš„è³‡æ·±äººå£«å‰µç«‹ï¼Œé“æ±ç§‘æŠ€é€£æŽ¥äº†æ±æ–¹å‰µæ–°å’Œè¥¿æ–¹å¸‚å ´ä¹‹é–“çš„æ©‹æ¨‘ã€‚æˆ‘å€‘ç¨ç‰¹çš„é›™æ–‡åŒ–è¦–è§’å’ŒæŠ€è¡“å°ˆé•·ä½¿å…¬å¸èƒ½å¤ åœ¨å…¨çƒç¯„åœå…§æˆåŠŸï¼ŒåŒæ™‚åˆ©ç”¨AIçš„åŠ›é‡ã€‚',
        'Excellence in Execution': 'åŸ·è¡Œå“è¶Š',
        'Global Perspective': 'å…¨çƒè¦–é‡Ž',
        'AI-First Innovation': 'AIå„ªå…ˆå‰µæ–°',
        'Partnership Mindset': 'åˆä½œå¤¥ä¼´å¿ƒæ…‹',
        'San Francisco, CA': 'åŠ å·žèˆŠé‡‘å±±',
        'US Headquarters': 'ç¾Žåœ‹ç¸½éƒ¨',
        'Taipei, Taiwan': 'å°ç£å°åŒ—',
        'Asia Operations': 'äºžæ´²é‹ç‡Ÿ',

        // CTA
        'Ready to Transform Your Business?': 'æº–å‚™å¥½è½‰åž‹æ‚¨çš„æ¥­å‹™äº†å—Žï¼Ÿ',
        'US Market Entry': 'ç¾Žåœ‹å¸‚å ´é€²å…¥',
        'Launch in the US Market': 'åœ¨ç¾Žåœ‹å¸‚å ´å•Ÿå‹•',
        'Schedule Strategy Call': 'å®‰æŽ’ç­–ç•¥é›»è©±',
        'AI Implementation': 'AIå¯¦æ–½',
        'Deploy AI Agents': 'éƒ¨ç½²AIä»£ç†',
        'Get Free Demo': 'ç²å¾—å…è²»æ¼”ç¤º',

        // Footer
        'Bridging Innovation East to West': 'é€£æŽ¥æ±è¥¿æ–¹å‰µæ–°',
        'Company': 'å…¬å¸',
        'About Us': 'é—œæ–¼æˆ‘å€‘',
        'Success Stories': 'æˆåŠŸæ¡ˆä¾‹',
        'Careers': 'è·æ¥­æ©Ÿæœƒ',
        'Our Process': 'æˆ‘å€‘çš„æµç¨‹',
        'All rights reserved.': 'ç‰ˆæ¬Šæ‰€æœ‰ã€‚',
        'Privacy Policy': 'éš±ç§æ”¿ç­–',
        'Terms of Service': 'æœå‹™æ¢æ¬¾',

        // Chatbot
        'AI Assistant': 'AIåŠ©æ‰‹',
        'Hello! How can I help you with US market entry or AI solutions?': 'æ‚¨å¥½ï¼æˆ‘å¦‚ä½•å¹«åŠ©æ‚¨é€²å…¥ç¾Žåœ‹å¸‚å ´æˆ–AIè§£æ±ºæ–¹æ¡ˆï¼Ÿ'
    }
};

// Global variables
let currentLanguage = 'zh';
let isScrolling = false;

// DOM Content Loaded
document.addEventListener('DOMContentLoaded', function() {
    initializeWebsite();
});

// Initialize website functionality
function initializeWebsite() {
    setupLanguageToggle();
    setupMobileNavigation();
    setupScrollEffects();
    setupAnimations();
    setupROICalculator();
    setupChatbot();
    setupSmoothScrolling();
    setupHeroButtons();
    createScrollProgressBar();
    setupIntersectionObserver();
}

// Language Toggle Functionality
function setupLanguageToggle() {
    const langButtons = document.querySelectorAll('.lang-btn');
    
    langButtons.forEach(btn => {
        btn.addEventListener('click', () => {
            const lang = btn.getAttribute('data-lang');
            switchLanguage(lang);
            
            // Update active button
            langButtons.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        });
    });
}

function switchLanguage(lang) {
    currentLanguage = lang;
    const elements = document.querySelectorAll(`[data-${lang}]`);
    
    elements.forEach(element => {
        const text = element.getAttribute(`data-${lang}`);
        if (text) {
            if (element.tagName === 'INPUT') {
                element.placeholder = text;
            } else {
                element.textContent = text;
            }
        }
    });

    // Update chatbot messages
    updateChatbotLanguage();
    
    // Store language preference
    localStorage.setItem('preferredLanguage', lang);
}

// Load saved language preference
function loadLanguagePreference() {
    const savedLang = localStorage.getItem('preferredLanguage');
    if (savedLang && savedLang !== currentLanguage) {
        switchLanguage(savedLang);
        document.querySelector(`[data-lang="${savedLang}"]`).classList.add('active');
        document.querySelector(`[data-lang="${currentLanguage}"]`).classList.remove('active');
    }
}

// Mobile Navigation
function setupMobileNavigation() {
    const hamburger = document.getElementById('hamburger');
    const navMenu = document.getElementById('nav-menu');
    
    hamburger.addEventListener('click', () => {
        hamburger.classList.toggle('active');
        navMenu.classList.toggle('active');
    });
    
    // Close mobile menu when clicking on links
    const navLinks = document.querySelectorAll('.nav-link');
    navLinks.forEach(link => {
        link.addEventListener('click', () => {
            hamburger.classList.remove('active');
            navMenu.classList.remove('active');
        });
    });
    
    // Close mobile menu when clicking outside
    document.addEventListener('click', (e) => {
        if (!navMenu.contains(e.target) && !hamburger.contains(e.target)) {
            hamburger.classList.remove('active');
            navMenu.classList.remove('active');
        }
    });
}

// Scroll Effects
function setupScrollEffects() {
    const navbar = document.getElementById('navbar');
    let lastScrollTop = 0;
    
    window.addEventListener('scroll', () => {
        if (isScrolling) return;
        
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        
        // Navbar background effect
        if (scrollTop > 100) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
        
        // Hide/show navbar on scroll
        if (scrollTop > lastScrollTop && scrollTop > 200) {
            navbar.style.transform = 'translateY(-100%)';
        } else {
            navbar.style.transform = 'translateY(0)';
        }
        
        lastScrollTop = scrollTop;
        
        // Update scroll progress
        updateScrollProgress();
    });
}

// Create and update scroll progress bar
function createScrollProgressBar() {
    const progressBar = document.createElement('div');
    progressBar.className = 'scroll-progress';
    document.body.appendChild(progressBar);
}

function updateScrollProgress() {
    const progressBar = document.querySelector('.scroll-progress');
    const windowHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    const scrolled = (window.scrollY / windowHeight) * 100;
    progressBar.style.width = scrolled + '%';
}

// Intersection Observer for animations
function setupIntersectionObserver() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('in-view');
                
                // Animate counters
                if (entry.target.classList.contains('counter')) {
                    animateCounter(entry.target);
                }
                
                // Special handling for differentiators
                if (entry.target.classList.contains('why-daodong')) {
                    const differentiators = entry.target.querySelectorAll('.differentiator');
                    differentiators.forEach((diff, index) => {
                        setTimeout(() => {
                            diff.classList.add('animate');
                        }, index * 100);
                    });
                }
            }
        });
    }, observerOptions);
    
    // Observe elements for animation
    const animateElements = document.querySelectorAll('.animate-on-scroll, .why-daodong');
    animateElements.forEach(el => {
        observer.observe(el);
    });
    
    // Add animate class to elements
    const sectionsToAnimate = document.querySelectorAll('section > .container > *');
    sectionsToAnimate.forEach(el => {
        el.classList.add('animate-on-scroll');
        observer.observe(el);
    });
}

// Setup animations
function setupAnimations() {
    // Particle animation
    createParticleAnimation();
    
    // Service card hover effects
    const serviceCards = document.querySelectorAll('.service-card');
    serviceCards.forEach(card => {
        card.addEventListener('mouseenter', () => {
            card.style.transform = 'translateY(-8px) scale(1.02)';
        });
        
        card.addEventListener('mouseleave', () => {
            card.style.transform = 'translateY(0) scale(1)';
        });
    });
    
    // Button ripple effect
    const buttons = document.querySelectorAll('.btn');
    buttons.forEach(button => {
        button.addEventListener('click', createRipple);
    });
}

function createParticleAnimation() {
    const particleSystem = document.querySelector('.particle-system');
    if (!particleSystem) return;
    
    // Create floating particles
    for (let i = 0; i < 20; i++) {
        const particle = document.createElement('div');
        particle.style.cssText = `
            position: absolute;
            width: ${Math.random() * 4 + 2}px;
            height: ${Math.random() * 4 + 2}px;
            background: rgba(249, 115, 22, ${Math.random() * 0.5 + 0.1});
            border-radius: 50%;
            left: ${Math.random() * 100}%;
            top: ${Math.random() * 100}%;
            animation: float ${Math.random() * 10 + 10}s linear infinite;
            animation-delay: ${Math.random() * 5}s;
        `;
        particleSystem.appendChild(particle);
    }
    
    // Add CSS for particle animation
    const style = document.createElement('style');
    style.textContent = `
        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }
    `;
    document.head.appendChild(style);
}

function createRipple(e) {
    const button = e.currentTarget;
    const ripple = document.createElement('span');
    const rect = button.getBoundingClientRect();
    const size = Math.max(rect.width, rect.height);
    const x = e.clientX - rect.left - size / 2;
    const y = e.clientY - rect.top - size / 2;
    
    ripple.style.cssText = `
        position: absolute;
        width: ${size}px;
        height: ${size}px;
        left: ${x}px;
        top: ${y}px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        transform: scale(0);
        animation: ripple 0.6s linear;
        pointer-events: none;
    `;
    
    button.style.position = 'relative';
    button.style.overflow = 'hidden';
    button.appendChild(ripple);
    
    setTimeout(() => {
        ripple.remove();
    }, 600);
}

// Add ripple animation CSS
const rippleStyle = document.createElement('style');
rippleStyle.textContent = `
    @keyframes ripple {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }
`;
document.head.appendChild(rippleStyle);

// ROI Calculator
function setupROICalculator() {
    const monthlyTasks = document.getElementById('monthly-tasks');
    const hoursPerTask = document.getElementById('hours-per-task');
    const hourlyRate = document.getElementById('hourly-rate');
    const savingsAmount = document.querySelector('.savings-amount');
    
    function calculateROI() {
        const tasks = parseFloat(monthlyTasks.value) || 0;
        const hours = parseFloat(hoursPerTask.value) || 0;
        const rate = parseFloat(hourlyRate.value) || 0;
        
        // Assume AI can automate 70% of tasks
        const savings = tasks * hours * rate * 0.7;
        savingsAmount.textContent = `$${savings.toLocaleString()}`;
        
        // Add animation to the result
        savingsAmount.style.transform = 'scale(1.1)';
        setTimeout(() => {
            savingsAmount.style.transform = 'scale(1)';
        }, 200);
    }
    
    [monthlyTasks, hoursPerTask, hourlyRate].forEach(input => {
        if (input) {
            input.addEventListener('input', calculateROI);
        }
    });
}

// Chatbot functionality
function setupChatbot() {
    const chatbotToggle = document.getElementById('chatbot-toggle');
    const chatbotWindow = document.getElementById('chatbot-window');
    const chatbotClose = document.getElementById('chatbot-close');
    const chatbotInput = document.getElementById('chatbot-input');
    const chatbotSend = document.getElementById('chatbot-send');
    const chatbotMessages = document.getElementById('chatbot-messages');
    
    // Toggle chatbot
    chatbotToggle.addEventListener('click', () => {
        chatbotWindow.classList.toggle('active');
    });
    
    // Close chatbot
    chatbotClose.addEventListener('click', () => {
        chatbotWindow.classList.remove('active');
    });
    
    // Send message
    function sendMessage() {
        const message = chatbotInput.value.trim();
        if (!message) return;
        
        // Add user message
        addMessage(message, 'user');
        chatbotInput.value = '';
        
        // Simulate AI response
        setTimeout(() => {
            const response = generateAIResponse(message);
            addMessage(response, 'bot');
        }, 1000);
    }
    
    chatbotSend.addEventListener('click', sendMessage);
    chatbotInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            sendMessage();
        }
    });
    
    function addMessage(text, sender) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${sender}-message`;
        messageDiv.textContent = text;
        chatbotMessages.appendChild(messageDiv);
        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
    }
    
    function generateAIResponse(userMessage) {
        const responses = {
            en: [
                "I'd be happy to help you with US market entry strategies!",
                "Our AI solutions can save your business significant time and resources.",
                "Let me connect you with one of our specialists.",
                "Would you like to schedule a free consultation?",
                "Our team has helped 50+ companies successfully enter the US market."
            ],
            zh: [
                "æˆ‘å¾ˆæ¨‚æ„å¹«åŠ©æ‚¨åˆ¶å®šç¾Žåœ‹å¸‚å ´é€²å…¥ç­–ç•¥ï¼",
                "æˆ‘å€‘çš„AIè§£æ±ºæ–¹æ¡ˆå¯ä»¥ç‚ºæ‚¨çš„æ¥­å‹™ç¯€çœå¤§é‡æ™‚é–“å’Œè³‡æºã€‚",
                "è®“æˆ‘ç‚ºæ‚¨è¯ç¹«æˆ‘å€‘çš„å°ˆå®¶ã€‚",
                "æ‚¨æƒ³å®‰æŽ’å…è²»è«®è©¢å—Žï¼Ÿ",
                "æˆ‘å€‘çš„åœ˜éšŠå·²ç¶“å¹«åŠ©50å¤šå®¶å…¬å¸æˆåŠŸé€²å…¥ç¾Žåœ‹å¸‚å ´ã€‚"
            ]
        };
        
        const responseList = responses[currentLanguage] || responses.en;
        return responseList[Math.floor(Math.random() * responseList.length)];
    }
}

function updateChatbotLanguage() {
    const botMessages = document.querySelectorAll('.bot-message');
    botMessages.forEach(msg => {
        if (msg.textContent.includes('Hello!') || msg.textContent.includes('æ‚¨å¥½ï¼')) {
            const text = currentLanguage === 'zh' 
                ? 'æ‚¨å¥½ï¼æˆ‘å¦‚ä½•å¹«åŠ©æ‚¨é€²å…¥ç¾Žåœ‹å¸‚å ´æˆ–AIè§£æ±ºæ–¹æ¡ˆï¼Ÿ'
                : 'Hello! How can I help you with US market entry or AI solutions?';
            msg.textContent = text;
        }
    });
}

// Hero buttons functionality
function setupHeroButtons() {
    // Get the hero buttons
    const usJourneyBtn = document.querySelector('.btn-primary');
    const aiSolutionsBtn = document.querySelector('.btn-secondary');
    
    // Add click handlers
    if (usJourneyBtn) {
        usJourneyBtn.addEventListener('click', (e) => {
            e.preventDefault();
            scrollToSection('#us-market');
            trackEvent('cta_clicked', { button: 'start_us_journey' });
        });
    }
    
    if (aiSolutionsBtn) {
        aiSolutionsBtn.addEventListener('click', (e) => {
            e.preventDefault();
            scrollToSection('#ai-solutions');
            trackEvent('cta_clicked', { button: 'explore_ai_solutions' });
        });
    }
}

// Smooth scrolling utility function
function scrollToSection(targetId) {
    const targetSection = document.querySelector(targetId);
    
    if (targetSection) {
        const offsetTop = targetSection.offsetTop - 80; // Account for fixed navbar
        
        window.scrollTo({
            top: offsetTop,
            behavior: 'smooth'
        });
    }
}

// Smooth scrolling for navigation links
function setupSmoothScrolling() {
    const navLinks = document.querySelectorAll('a[href^="#"]');
    
    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const targetId = link.getAttribute('href');
            scrollToSection(targetId);
        });
    });
}

// Counter animation
function animateCounter(element) {
    const target = parseInt(element.getAttribute('data-target'));
    const duration = 2000;
    const start = 0;
    const increment = target / (duration / 16);
    let current = start;
    
    const timer = setInterval(() => {
        current += increment;
        element.textContent = Math.floor(current);
        
        if (current >= target) {
            element.textContent = target;
            clearInterval(timer);
        }
    }, 16);
}

// Performance optimization
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}

// Optimize scroll events
const debouncedScrollHandler = debounce(() => {
    isScrolling = false;
}, 100);

window.addEventListener('scroll', () => {
    isScrolling = true;
    debouncedScrollHandler();
});

// Lazy loading for images
function setupLazyLoading() {
    const images = document.querySelectorAll('img[data-src]');
    const imageObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                img.src = img.dataset.src;
                img.classList.remove('lazy');
                imageObserver.unobserve(img);
            }
        });
    });
    
    images.forEach(img => imageObserver.observe(img));
}

// Form validation and submission
function setupFormHandling() {
    const forms = document.querySelectorAll('form');
    
    forms.forEach(form => {
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Basic form validation
            const inputs = form.querySelectorAll('input[required]');
            let isValid = true;
            
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    isValid = false;
                    input.classList.add('error');
                } else {
                    input.classList.remove('error');
                }
            });
            
            if (isValid) {
                // Simulate form submission
                showNotification('Form submitted successfully!');
                form.reset();
            } else {
                showNotification('Please fill in all required fields.');
            }
        });
    });
}

// Notification system
function showNotification(message, type = 'success') {
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.textContent = message;
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? '#10B981' : '#EF4444'};
        color: white;
        padding: 16px 24px;
        border-radius: 8px;
        z-index: 10000;
        transform: translateX(100%);
        transition: transform 0.3s ease;
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.transform = 'translateX(0)';
    }, 100);
    
    setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
            notification.remove();
        }, 300);
    }, 3000);
}

// Analytics tracking (placeholder)
function trackEvent(eventName, properties = {}) {
    // This would integrate with your analytics service
    console.log('Event tracked:', eventName, properties);
}

// Error handling
window.addEventListener('error', (e) => {
    console.error('JavaScript error:', e.error);
    // You could send this to an error tracking service
});

// Initialize everything when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
    initializeWebsite();
    setupLazyLoading();
    setupFormHandling();
    
    // Set default language to Chinese if no preference is saved
    const savedLang = localStorage.getItem('preferredLanguage');
    if (!savedLang) {
        switchLanguage('zh'); // Initialize with Chinese
    } else {
        loadLanguagePreference();
    }
    
    // Track page load
    trackEvent('page_loaded', {
        page: 'homepage',
        language: currentLanguage
    });
});

// Service Worker registration for offline functionality
if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
            .then(registration => {
                console.log('SW registered: ', registration);
            })
            .catch(registrationError => {
                console.log('SW registration failed: ', registrationError);
            });
    });
}